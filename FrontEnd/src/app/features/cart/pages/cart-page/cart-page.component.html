<main class="flex-1">
  <div
    class="min-h-screen bg-gradient-to-br from-[#07102a] via-[#0B1A3D] to-[#001135] nebula-pulse"
  >
    @if (cart === null) {
    <!-- Loading Spinner -->
    <div class="flex justify-center items-center h-screen">
      <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-[#00A8FF]"></div>
    </div>
    } @else {
    <!-- Hero Section -->
    <div
      class="relative bg-gradient-to-br from-[#07102a] via-[#0B1A3D] to-[#001135] py-16 md:py-20 overflow-hidden"
    >
      <div class="star-field absolute inset-0">
        <div class="star star-twinkle"></div>
        <div class="star star-twinkle"></div>
        <div class="star star-twinkle"></div>
        <div class="star star-twinkle"></div>
      </div>

      <div class="container mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <div class="text-center max-w-4xl mx-auto">
          <h1
            class="text-4xl sm:text-5xl lg:text-6xl font-bold text-white font-['Exo_2'] mb-6 cosmic-glow"
          >
            Your Space Cart
          </h1>
          <p class="text-xl text-gray-300 mb-8 leading-relaxed">
            Review and manage your selected LEO services before launch
          </p>

          <!-- Cart Stats -->
          <div class="flex justify-center gap-8 text-center">
            <div
              class="bg-white/5 backdrop-blur-md rounded-2xl border border-[#00A8FF]/20 p-6 min-w-32"
            >
              <div class="text-3xl font-bold text-[#00A8FF]">{{ totalItems }}</div>
              <div class="text-gray-300 text-sm">Services</div>
            </div>
            <div
              class="bg-white/5 backdrop-blur-md rounded-2xl border border-[#00A8FF]/20 p-6 min-w-32"
            >
              <div class="text-3xl font-bold text-[#00F5D4]">${{ totalPrice | number }}</div>
              <div class="text-gray-300 text-sm">Total</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 relative z-10">
      <div class="flex flex-col lg:flex-row gap-8">
        <!-- Cart Items -->
        <div class="lg:w-2/3">
          <!-- Header -->
          <div class="flex items-center justify-between mb-8">
            <div>
              <h2 class="text-2xl font-bold text-white">Selected Services</h2>
              <p class="text-gray-400 text-sm mt-1">{{ cartItems.length }} items in your cart</p>
            </div>

            @if (cartItems.length > 0) {
            <button
              (click)="clearCart()"
              class="flex items-center space-x-2 px-4 py-2 text-red-400 hover:text-red-300 hover:bg-red-400/10 rounded-xl transition-all duration-300 border border-red-400/20 hover:border-red-400/40"
            >
              <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                />
              </svg>
              <span class="font-medium">Clear All</span>
            </button>
            }
          </div>

          <!-- Cart Items List -->
          <div class="space-y-6">
            @for (item of cartItems; track item.cartItemId) {
            <app-cart-item [cartItem]="item"></app-cart-item>
            } @empty {
            <!-- Empty Cart State -->
            <div class="text-center py-16">
              <div
                class="bg-white/5 backdrop-blur-md rounded-2xl border border-[#00A8FF]/20 p-12 max-w-md mx-auto"
              >
                <div
                  class="w-24 h-24 bg-[#00A8FF]/10 rounded-full flex items-center justify-center mx-auto mb-6"
                >
                  <svg
                    class="w-12 h-12 text-[#00A8FF]"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="1.5"
                      d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"
                    />
                  </svg>
                </div>
                <h3 class="text-xl font-bold text-white mb-2">Your cart is empty</h3>
                <p class="text-gray-400 mb-6">
                  Explore our space services and add some to your cart
                </p>
                <a
                  [routerLink]="ROUTES.marketplace"
                  class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-medium h-12 px-6 bg-gradient-to-r from-[#00A8FF] to-[#0077FF] hover:from-[#00A8FF]/90 hover:to-[#0077FF]/90 text-white transition-all duration-300"
                >
                  Browse Services
                  <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M17 8l4 4m0 0l-4 4m4-4H3"
                    />
                  </svg>
                </a>
              </div>
            </div>
            }
          </div>
        </div>

        <!-- Order Summary -->
        @if (cartItems.length > 0) {
        <div class="lg:w-1/3">
          <div
            class="bg-white/5 backdrop-blur-md rounded-2xl border border-[#00A8FF]/20 p-6 cosmic-glow-hover sticky top-6"
          >
            <h3 class="text-white font-semibold text-lg mb-6 flex items-center gap-2">
              <svg
                class="h-5 w-5 text-[#00A8FF]"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                />
              </svg>
              Order Summary
            </h3>

            <!-- Summary Details -->
            <div class="space-y-4 mb-6">
              <div class="flex justify-between text-gray-300">
                <span>Services ({{ totalItems }})</span>
                <span>${{ totalPrice | number }}</span>
              </div>
              <div class="flex justify-between text-gray-300">
                <span>Orbital Processing</span>
                <span>$0.00</span>
              </div>
              <div class="flex justify-between text-gray-300">
                <span>Data Transmission</span>
                <span>$0.00</span>
              </div>
              <div class="border-t border-[#00A8FF]/20 pt-4">
                <div class="flex justify-between text-lg font-bold text-white">
                  <span>Total</span>
                  <span class="text-[#00F5D4]">${{ totalPrice | number }}</span>
                </div>
              </div>
            </div>

            <!-- Security Note -->
            <div class="text-center">
              <p class="text-xs text-gray-400">
                <svg
                  class="h-3 w-3 inline mr-1 text-green-400"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                    clip-rule="evenodd"
                  />
                </svg>
                Secure orbital transaction â€¢ Encrypted data transmission
              </p>
            </div>
          </div>
        </div>
        }
      </div>
    </div>
    }
  </div>
</main>
