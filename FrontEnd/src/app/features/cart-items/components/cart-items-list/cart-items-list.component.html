<div *ngIf="loading">Loading...</div>
<div *ngIf="error" class="error-message">{{ error }}</div>

<div *ngIf="cart && !loading">
  <table>
    <thead>
      <tr>
        <th>Image</th>
        <th>Service</th>
        <th>Provider</th>
        <th>Quantity</th>
        <th>Unit Price</th>
        <th>Total</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of cart.cartItems; trackBy: trackByCartItemId">
        <td><img [src]="item.imageUrl" [alt]="item.serviceTitle" width="50"></td>
        <td>{{ item.serviceTitle }}</td>
        <td>{{ item.providerName }}</td>
        <td>
          <input
            type="number"
            [value]="item.quantity"
            (change)="updateQuantity(item, $event.target.value)"
            min="1"
          />
        </td>
        <td>{{ item.unitPrice | currency }}</td>
        <td>{{ item.total | currency }}</td>
        <td>
          <button (click)="removeItem(item)">Remove</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="cart-summary">
    <p>Total Items: {{ cart.totalItems }}</p>
    <p>Total Price: {{ cart.totalPrice | currency }}</p>
    <button (click)="clearCart()">Clear Cart</button>
  </div>
</div>

<style>
  .error-message {
    color: #f87171;
    margin: 1rem 0;
    font-weight: 500;
  }
</style>