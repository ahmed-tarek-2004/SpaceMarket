<div class="all-satellites-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="header-content">
      <h2 class="header-title">All Satellites</h2>
      <p class="header-description">
        Browse and select satellites to manage their proximity thresholds
      </p>
    </div>

    <!-- Search and Refresh Controls -->
    <div class="controls-section">
      <div class="search-container">
        <div class="search-input-wrapper">
          <svg class="search-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
            />
          </svg>
          <input
            type="text"
            class="search-input"
            placeholder="Search satellites by name, ID, or NORAD ID..."
            [value]="searchQuery()"
            (input)="onSearchChange($any($event.target).value)"
          />
          <button
            class="clear-search-btn"
            *ngIf="searchQuery()"
            (click)="onSearchChange('')"
            title="Clear search"
          >
            <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              />
            </svg>
          </button>
        </div>
      </div>

      <button
        class="refresh-btn"
        (click)="refreshSatellites()"
        [disabled]="isLoading()"
        title="Refresh satellite list"
      >
        <svg
          class="w-4 h-4"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          [class.animate-spin]="isLoading()"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
          />
        </svg>
        Refresh
      </button>
    </div>
  </div>

  <!-- Results Summary -->
  <div class="results-summary" *ngIf="!isLoading() && !hasError()">
    <div class="summary-text">
      <span class="total-count">{{ filteredSatellites.length }}</span>
      <span class="count-label">{{
        filteredSatellites.length === 1 ? 'satellite' : 'satellites'
      }}</span>
      <span *ngIf="searchQuery()" class="search-indicator">found for "{{ searchQuery() }}"</span>
    </div>

    <!-- Pagination Info -->
    <div class="pagination-info" *ngIf="totalPages() > 1">
      <span>Page {{ currentPage() }} of {{ totalPages() }}</span>
      <span class="items-info"
        >({{ (currentPage() - 1) * itemsPerPage() + 1 }}-{{
          Math.min(currentPage() * itemsPerPage(), filteredSatellites.length)
        }}
        of {{ filteredSatellites.length }})</span
      >
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-state" *ngIf="isLoading()">
    <div class="loading-spinner">
      <svg class="w-8 h-8 animate-spin" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
        />
      </svg>
    </div>
    <p class="loading-text">Loading satellites...</p>
  </div>

  <!-- Error State -->
  <div class="error-state" *ngIf="hasError() && !isLoading()">
    <div class="error-icon">
      <svg class="w-12 h-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"
        />
      </svg>
    </div>
    <h3 class="error-title">Failed to Load Satellites</h3>
    <p class="error-message">
      {{ errorMessage() || 'Unable to fetch satellite data. Please try again later.' }}
    </p>
    <button class="retry-btn" (click)="refreshSatellites()">
      <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
        />
      </svg>
      Try Again
    </button>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="!isLoading() && !hasError() && filteredSatellites.length === 0">
    <div class="empty-icon">
      <svg class="w-16 h-16" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
        />
      </svg>
    </div>
    <h3 class="empty-title" *ngIf="!searchQuery()">No Satellites Available</h3>
    <h3 class="empty-title" *ngIf="searchQuery()">No Satellites Found</h3>
    <p class="empty-description" *ngIf="!searchQuery()">
      There are currently no satellites registered in the system.
    </p>
    <p class="empty-description" *ngIf="searchQuery()">
      No satellites match your search criteria. Try adjusting your search terms.
    </p>
  </div>

  <!-- Satellites Grid -->
  <div class="satellites-grid" *ngIf="!isLoading() && !hasError() && filteredSatellites.length > 0">
    <div
      class="satellite-card"
      *ngFor="let satellite of paginatedSatellites(); trackBy: trackBySatelliteId"
      (click)="onSatelliteClick(satellite)"
    >
      <!-- Card Header -->
      <div class="card-header">
        <div class="satellite-icon">
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M13 7l-4 4m0 0l-4-4m4 4l4-4M5 7l4 4m4-6v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
            />
          </svg>
        </div>
        <div class="satellite-info">
          <h3 class="satellite-name">{{ satellite.name }}</h3>
          <p class="satellite-id">ID: {{ satellite.id }}</p>
        </div>
        <div class="status-indicator" [class]="getStatusColor(satellite.proximityThresholdKm)">
          <div class="status-dot"></div>
          <span class="status-text">{{ getStatusText(satellite.proximityThresholdKm) }}</span>
        </div>
      </div>

      <!-- Card Content -->
      <div class="card-content">
        <div class="info-item">
          <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
            />
          </svg>
          <span class="info-label">NORAD ID:</span>
          <span class="info-value">{{ satellite.noradId }}</span>
        </div>

        <div class="info-item">
          <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"
            />
          </svg>
          <span class="info-label">Threshold:</span>
          <span class="info-value">{{ satellite.proximityThresholdKm }} km</span>
        </div>

        <div class="info-item">
          <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
            />
          </svg>
          <span class="info-label">Registered:</span>
          <span class="info-value">{{ getRelativeTime(satellite.createdAt) }}</span>
        </div>
      </div>

      <!-- Card Footer -->
      <div class="card-footer">
        <div class="select-indicator">
          <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
            />
          </svg>
          <span>Click to Edit Threshold</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Pagination -->
  <div class="pagination-container" *ngIf="!isLoading() && !hasError() && totalPages() > 1">
    <div class="pagination">
      <!-- Previous Button -->
      <button
        class="pagination-btn prev-btn"
        [disabled]="currentPage() === 1"
        (click)="onPageChange(currentPage() - 1)"
        title="Previous page"
      >
        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 19l-7-7 7-7"
          />
        </svg>
        Previous
      </button>

      <!-- Page Numbers -->
      <div class="page-numbers">
        <button
          *ngFor="let page of getPageNumbers(); trackBy: trackByPageNumber"
          class="page-btn"
          [class.active]="page === currentPage()"
          (click)="onPageChange(page)"
        >
          {{ page }}
        </button>
      </div>

      <!-- Next Button -->
      <button
        class="pagination-btn next-btn"
        [disabled]="currentPage() === totalPages()"
        (click)="onPageChange(currentPage() + 1)"
        title="Next page"
      >
        Next
        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      </button>
    </div>
  </div>
</div>
